#!/bin/bash

echo
echo "Bash version ${BASH_VERSION}..."
echo


#limpiar datos viejos


REP=50

NN="diff"

rm -r ./copias
rm $NN* 

mkdir copias ;

NN2="diff2"

ORIG=index.jpg


NOMCOPIAA="diffa.png"
NOMCOPIAB="diffb.png"

TEMP="difftp.png"

NOM="diff.png"
NOM2="diff2.png"


echo "variables: "
echo $NN
echo $NN2
echo $NOMCOPIAA
echo $NOMCOPIAB

echo $TEMP

echo $NOM

echo $NOM2

echo
echo 

RANGE=10
echo

NUM=$RANDOM
let "NUM %= $RANGE"

echo "init " 

./dist $ORIG $NN ;
cp $NOM ./copias/


./dist $ORIG "$NN2" ;
cp ./$NOM2 ./copias/



echo "init terminado"

for VAR in {0..500}
do
    echo 
    echo $VAR
    
    #if [ "$NUM" -gt "2" ]; then

        echo "destruir "
        ./dist $NOM  $NN ;
        cp ./$NOM ./copias/"$VAR$NOMCOPIAA"
        cp ./$NOM ./$TEMP
        echo "destruir terminado"
    #fi

    NUM=$RANDOM
    let "NUM %= $RANGE"

    echo 
    
    if [ "$NUM" -gt "3" ]; then
        echo "mezclar "
        ./mezcl $NOM $ORIG $NN
        cp ./$NOM ./copias/"$VAR$NOMCOPIAB"
        mv ./$TEMP $NOM2
        echo "mezclar terminado"
    fi
    echo
done


convert -resize 50% -delay 25 -loop 0 -limit memory 2000MB  copias/*.png prueba.gif
